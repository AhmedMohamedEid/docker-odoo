<?xml version="1.0" encoding="utf-8" ?>
<odoo>

    <template id="report_sale_document" inherit_id="sale.report_saleorder_document">
      <xpath expr="//div[@id='informations']" position="after">
        <!-- Groups with the new fields -->
        <h3 t-field="doc.moka_sejour_titre_devis"/>

        <div class="mb32 bg-100" style="border: 1px solid #e4e4e4;">
          <div class="row">
            <div t-if="doc.moka_is_sejour_devis" t-att-class="'col-4 mt-1' if doc.moka_nombre_personnes_devis != 0 else 'col-6 mt-1'" style="text-align:center;">
              <t t-set="hour_d" t-value="env['sale.order']._get_hour_start(doc.name)"/>
              <strong>Benefit start:</strong>
              <p>
                <span t-field="doc.moka_sejour_debut_devis"/>
                <t t-if="hour_d != '0:00'" t-esc="hour_d"/>
              </p>
            </div>
            <div t-if="doc.moka_is_sejour_devis" t-att-class="'col-4 mt-1' if doc.moka_nombre_personnes_devis != 0 else 'col-6 mt-1'" style="text-align:center;">
              <t t-set="hour_f" t-value="env['sale.order']._get_hour_end(doc.name)"/>
              <strong>Benefit end:</strong>
              <p>
                <span t-field="doc.moka_sejour_fin_devis"/>
                <t t-if="hour_f != '0:00'" t-esc="hour_f"/>
              </p>
            </div>
            <div t-if="doc.moka_is_sejour_devis and doc.moka_nombre_personnes_devis != 0" t-att-class="'col-4 mt-1' if doc.moka_nombre_personnes_devis != 0 else 'col-6 mt-1'" style="text-align:center;">
              <strong>Person(s):</strong>
              <p t-field="doc.moka_nombre_personnes_devis"/>
            </div>
          </div>
        </div>
      </xpath>

      <!-- Update the ppp ht -->
      <xpath expr="//div[@class='clearfix']/div/div/table/tr[1]" position="after">
        <tr t-if="doc.moka_is_sejour_devis and doc.moka_nombre_personnes_devis != 0" class="border-black o_subtotal" style="">
          <td>Price / Person HT</td>
          <td class="text-right">
            <span t-field="doc.moka_prix_pp_ht_devis"/>
          </td>
        </tr>
      </xpath>

      <!-- Update the ppp total -->
      <xpath expr="//div[@class='clearfix']/div/div/table/tr[3]" position="after">
        <tr t-if="doc.moka_is_sejour_devis and doc.moka_nombre_personnes_devis != 0" class="border-black o_subtotal" style="">
          <td>Price / Person</td>
          <td class="text-right">
            <span t-field="doc.moka_prix_pp_devis"/>
          </td>
        </tr>
      </xpath>
    </template>

</odoo>
